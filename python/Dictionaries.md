# Словари

Словари это мутабельные (изменяемые), неупорядоченные коллекции, которые состоят из пары ключ/значение.

## Создание словаря

Словарь можно создать двумя путями. Первый из них это присвоить переменной пустые фигурные скобки. Вы сразу же получите пустой словарь. Можно одновременно добавить в словарь записи в виде пары ключ/значение. Второй способ это использование конструктора `dict`.

Пример создания словаря:

```python
d = { 'key': 'value' }
d = dict({ 'key': 'value', 'key2': 'value'})
d = dict(brand="Ford", model="Mustang", year=1964)
```

## Ключи

Для ключей в словарях используется любой тип данных попадающий под категорию hashable, т. е. типы данных, из которых можно извлечь хеш значение. Это может быть строка, число, кортеж, встроенные классы типа `dict` или пользовательские классы с реализованными методами `__hash__`, `__eq__` или `__cmp__`.

Пример словаря со смешанными ключами:

```python
d = { 1: 'progress', 2: 'element', 'name': 'Jhon', True: 21}
```

## Доступ к данным словаря

Доступ к данным осуществляется двумя способами: через метод `get()` или при помощи квадратных скобок. Обращение осуществляется к ключу.

Пример доступа к данным словаря:

```python
d = { 1: 'progress', 2: 'element', 'name': 'Jhon'}
d.get(1)
d.get('name')
d['name']
d[1] 
```
Следует отметить, что есть разница между способами доступа к данным в плане результата вывода. Метод `get()` при отсутствии ключа в словаре вернет `None`. При обращении к несуществующему ключу через квадратные скобки будет вызвана ошибка `KeyError`.

## Добавление данных в существующий словарь

Чтобы добавить новый элемент в словарь необходимо либо присвоить значение указав новый ключ через квадратные скобки, либо использовать метод словаря `update()` добавив пару данных ключ/значение.

Пример добавление новых данных в словарь:

```python
d['name'] = 'Jhon'
d.update({'age': 45})
```

Метод `update()` также позволяет добавить новое ключ/значение или обновить значение существующего ключа указав ключ в качестве параметра вызова функции:

```python
d.update(age = 22)
```

Однако такая запись работает только со строковыми ключами.

**Важно!** Внутреннее устройство словаря использует хеш ключа для привязки к нему значения. Это значит что создание словаря cо значениями `{True: 'one', 1: 'two'}` вернет в результате словарь `{True: 'two'}`, так как хеш True и 1 одинаков. Иначе говоря `True = 1.0 = 1` и `False = 0.0 = 0` будут ключами, указывающими на одно и тоже значение.

## Удаление элементов из словаря

Python предоставляет несколько способов для удаления элементов из словаря. Первый из них это метод `pop()`. В качестве аргумента используется ключ. После удаления элемента из словаря метод возвращает значение которое было асоциировано с ключем.

Пример применения метода `pop()`:

```python
d = {'name': 'Jhon', 'age': 43}
val = d.pop('name') # val = 'Jhon'
```

Следующий метод это `popitem()`, который удаляет произвольную пару ключ/значение и возвращает ее в качестве кортежа.

Пример применения метода `popitem()`:

```python
d = {'name': 'Jhon', 'age': 43}
val = d.popitem() # val = ('age': 43)
```

Метод `clear()` позволяет полностью очистить словарь от данных.

Кроме того можно удалить элемент с помощью ключевого слова `del` (или применить его к словарю для его полного удаления). 

Пример применения ключевого слова `del`:

```python
d = {'name': 'Jhon', 'age': 43}
del d['name']
del d
```

## Итерация по словарю

Итерация пороводится стандартным оператором `for in`. В обычном случае итерация выполняется по ключам, чтобы одновременно получить и ключ и значение ключа необходимо использовать метода словаря `items()`.

Пример итерирования по словарю:

```python
for key, value in dic.items():
  print('key: %s, value: %s' % (key, value))
```

## Dictionary Comprehension

Создать словарь можно при помощи сomprehension по тому же принципу что и списки.

Пример создания словаря при помощи сomprehension:

```python
l = [[1211,'one'],[24421,'two'],[2323,'three']]
{l[n][0]:l[n][1] for n in range(len(l))}
# {1211: 'one', 24421: 'two', 2323: 'three'}
```

Можно применить функцию `enumerate()` в Dictionary Comprehension чтобы получить индексы элементов.

Пример `enumerate()` в Dictionary Comprehensio:

```python
l = ['one', 'two', 'three']
{n : i for i, w in enumerate(l)}
```

```python
l = [[1211,'one'],[24421,'two'],[2323,'three']]
{elem[0]: elem[1] for index, elem in enumerate(l)}
# {1211: 'one', 24421: 'two', 2323: 'three'}
```

## Проверка на наличие

Проверить находится ли определенный ключ в словаре можно с помощью ключевого слова `in`. Результат вернет `True` если ключ существует и `Flase` если нет.

Пример проверки:

```python
d = {'car': 'Dodge', 'day': 'Wednesday'}
'car' in d
# True
```

## Слияние словарей

Чтобы объединить два и более словарей необходимо создать новый пустой словарь и по очереди выполнить метод `update()` с каждым словарем. Следует учитывать очередность, это влияет на то, какие конечные значения окажутся в итоговом словаре, если есть одинаковые ключи в объединяемых словарях.

Пример слияния:

```python
a = {'Piter': 48, 'Jhon': 33, 'Linda': 29}
b = {'Linda': 42, 'Darack': 28}
c = {}
c.update(a)
c.update(b)
# c = {'Piter': 48, 'Jhon': 33, 'Linda': 42, 'Darack': 28}
```

В python 3.5 появился еще один способ слияния словарей используя оператор распаковки `**kwargs`:

```python
a = {'Piter': 48, 'Jhon': 33, 'Linda': 29}
b = {'Linda': 42, 'Darack': 28}
c = {**a, **b}
# c = {'Piter': 48, 'Jhon': 33, 'Linda': 42, 'Darack': 28}
```

## Копирование словаря

У словаря (начиная с Python 3.3) есть стандартный метод `copy()` который позволяет скопировать словарь. Однако этот метод выполняет поверхностное копирование. При наличии в словаре вложеных структур типа списка или другого словаря копируются только ссылки на эти объекты, а не сами объекты. В результате изменения в этих объектах в оригинальном словаре будут отображатся также и в скопированном. Это следует учитывать при выборе способа копирования. Есть стандартный модуль copy который позволяет проводить глубокое копирование.